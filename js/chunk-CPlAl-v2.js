import{u as t}from"./chunk-CDoex7Rk.js";import{a as n}from"./chunk-Czrwg_dh.js";import{l as s}from"./chunk-D3YcvhA7.js";import{s as e}from"./chunk-CaxicGpp.js";import{u as a}from"./chunk-DDTO5rcc.js";import{a6 as i,r as o,o as r,aR as c,W as u,X as l,be as m,u as p,F as b,a_ as k}from"./chunk-BB7IEB5B.js";import"./chunk-DyqAhB7D.js";import"./chunk-BsxoPDUi.js";import"./chunk-Brhz0LsG.js";import"./chunk-B8dymozY.js";import"./chunk-CShO9xrd.js";import"./chunk-goYLvais.js";import"./chunk-DCTqbsaT.js";import"./chunk-C6Zwkpkb.js";import"./chunk-iVZSWji-.js";import"./chunk-BLnK4V6m.js";import"./chunk-Q9bklZT_.js";import"./chunk-6OeFQMrk.js";import"./chunk-D6zm6W2C.js";import"./chunk-Cjrd7Wf_.js";import"./chunk-CZIS8eQd.js";const h={class:"flex gap-3"},f={for:"explore"},d=["accept"],j={class:"btn btn-primary btn-sm"},g={class:"p-0"},v={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},y={class:"flex gap-3"},x=["onClick"],C=["onClick"],w=i({__name:"MusicConfig",setup(i){const{t:w}=a(),M=o(0),S=s.createInstance({name:"audioStore"}),D=t().globalConfig,{getMusicList:I}=e(D),L=o("audio/*"),_=o(I);function N(){D.resetMusicList(),S.clear()}function T(){D.clearMusicList(),S.clear()}async function $(){(await S.keys()).length>0&&S.iterate(((t,n)=>{D.addMusic({id:n+(new Date).getTime().toString(),name:n,url:"Storage"})}))}async function q(t){if(!/audio*/.test(t.target.files[0].type))return void(M.value=3);const{dataUrl:s,fileName:e}=await n(t.target.files[0]);S.setItem(`${(new Date).getTime().toString()}+${e}`,s).then((()=>{M.value=1,$()})).catch((()=>{M.value=2}))}return r((()=>{$()})),(t,n)=>(c(),u("div",null,[l("div",h,[l("button",{class:"btn btn-primary btn-sm",onClick:N},m(p(w)("button.reset")),1),l("label",f,[l("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:L.value,onChange:q},null,40,d),l("span",j,m(p(w)("button.upload")),1)]),l("button",{class:"btn btn-error btn-sm",onClick:T},m(p(w)("button.allDelete")),1)]),l("div",null,[l("ul",g,[(c(!0),u(b,null,k(_.value,(t=>(c(),u("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[l("div",v,[l("span",null,m(t.name),1)]),l("div",y,[l("button",{class:"btn btn-primary btn-xs",onClick:n=>async function(t){D.setCurrentMusic(t,!1)}(t)},m(p(w)("button.play")),9,x),l("button",{class:"btn btn-error btn-xs",onClick:n=>function(t){D.removeMusic(t.id),S.removeItem(t.name)}(t)},m(p(w)("button.delete")),9,C)])])))),128))])])]))}});export{w as default};
